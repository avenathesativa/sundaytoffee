<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Day | Sunday Toffee</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --valentine-pink: #C4847A;
            --valentine-pink-dark: #B07369;
            --valentine-bg: #FDF5F3;
            --dark-text: #4A4A4A;
            --light-text: #7A7A7A;
            --border: #E8D5D2;
            --butter-pink: #FCE8E6;
        }
        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark-text);
            background-color: var(--valentine-bg);
            line-height: 1.6;
            font-weight: 300;
        }
        nav { padding: 2rem 8%; display: flex; justify-content: space-between; align-items: center; max-width: 1100px; margin: 0 auto; }
        .logo { font-family: 'Libre Baskerville', serif; font-size: 1.3rem; color: var(--valentine-pink); text-decoration: none; }
        .nav-links { display: flex; gap: 2rem; list-style: none; }
        .nav-links a { text-decoration: none; color: var(--light-text); font-size: 0.9rem; }
        .order-page { max-width: 550px; margin: 0 auto; padding: 2rem 1.5rem 5rem; }
        .page-header { text-align: center; margin-bottom: 2rem; }
        .page-title { font-family: 'Libre Baskerville', serif; font-size: 2.2rem; font-weight: 400; color: var(--valentine-pink); margin-bottom: 1rem; }
        .section { margin-top: 2.5rem; }
        .section-title { font-family: 'Libre Baskerville', serif; font-size: 1.3rem; color: var(--valentine-pink); padding-bottom: 0.75rem; border-bottom: 1px solid var(--border); margin-bottom: 1.25rem; }
        .product-card { background: white; border-radius: 8px; padding: 1.25rem; display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .color-info { display: flex; align-items: center; gap: 1rem; }
        .color-swatch { width: 40px; height: 40px; border-radius: 8px; }
        .color-swatch.pink { background: #F8C8DC; }
        .color-swatch.red { background: #DC3545; }
        .color-swatch.white { background: #FFFFFF; border: 1px solid #E0DCD5; }
        .qty-controls { display: flex; align-items: center; gap: 1rem; }
        .qty-btn { width: 36px; height: 36px; border: 1px solid var(--border); border-radius: 50%; background: white; color: var(--valentine-pink); cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .qty-btn:hover { background: var(--butter-pink); }
        .total-bar { background: var(--butter-pink); border-radius: 8px; padding: 1rem 1.25rem; display: flex; justify-content: space-between; margin-top: 1rem; color: var(--valentine-pink); font-weight: 500; font-size: 1.1rem; }
        .info-box { background: white; border-left: 3px solid var(--valentine-pink); padding: 1.25rem; border-radius: 0 8px 8px 0; margin-bottom: 1.5rem; }
        .address-link { color: inherit; text-decoration: none; }
        .address-link:hover { text-decoration: underline; }
        .form-group { margin-bottom: 1.5rem; }
        label { display: block; font-size: 0.85rem; color: var(--dark-text); margin-bottom: 0.6rem; font-weight: 400; }
        input, textarea { width: 100%; padding: 0.9rem 1rem; border: 1px solid var(--border); border-radius: 8px; font-family: 'Inter', sans-serif; font-size: 0.95rem; background: white; }
        .radio-group { display: flex; flex-direction: column; gap: 0.8rem; }
        .radio-option { display: flex; align-items: center; gap: 0.75rem; cursor: pointer; font-size: 0.95rem; color: var(--dark-text); }
        .radio-option input { width: 18px; height: 18px; accent-color: var(--valentine-pink); cursor: pointer; }
        .radio-option.disabled { opacity: 0.3; pointer-events: none; }
        .handle-detail { color: var(--light-text); font-size: 0.85rem; }
        .method-details { display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed var(--border); }
        .method-details.active { display: block; }
        .btn-submit { width: 100%; padding: 1.1rem; background: var(--valentine-pink); color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: 500; cursor: pointer; margin-top: 2.5rem; transition: background 0.2s; }
        .btn-submit:hover { background: var(--valentine-pink-dark); }
        #confirmation { display: none; text-align: center; padding: 4rem 0; }
        #confirmation.show { display: block; }
        .summary-list { margin-top: 1.5rem; font-size: 0.95rem; text-align: left; }
        .summary-item { display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #eee; }
        footer { text-align: center; padding: 4rem 0; }
    </style>
</head>
<body>
    <nav>
        <a href="index.html" class="logo">sunday toffee</a>
        <ul class="nav-links">
            <li><a href="index.html#products">what i make</a></li>
            <li><a href="index.html#about">about</a></li>
            <li><a href="order.html">order</a></li>
        </ul>
    </nav>
    <div class="order-page">
        <div id="formContainer">
            <div class="page-header">
                <h1 class="page-title">valentine's day pre-order</h1>
                <p style="color: var(--light-text); font-size: 0.95rem;">Limited edition heart boxes filled with chocolate almond toffee.</p>
            </div>
            <form id="orderForm">
                <div class="section">
                    <h2 class="section-title">choose your boxes</h2>
                    <div class="product-card">
                        <div class="color-info"><div class="color-swatch pink"></div><div class="color-details"><h3>pink box</h3><p style="color: var(--valentine-pink);">$10</p></div></div>
                        <div class="qty-controls"><button type="button" class="qty-btn" onclick="updateQty('pink', -1)">−</button><span id="qty-pink">0</span><button type="button" class="qty-btn" onclick="updateQty('pink', 1)">+</button></div>
                    </div>
                    <div class="product-card">
                        <div class="color-info"><div class="color-swatch red"></div><div class="color-details"><h3>red box</h3><p style="color: var(--valentine-pink);">$10</p></div></div>
                        <div class="qty-controls"><button type="button" class="qty-btn" onclick="updateQty('red', -1)">−</button><span id="qty-red">0</span><button type="button" class="qty-btn" onclick="updateQty('red', 1)">+</button></div>
                    </div>
                    <div class="product-card">
                        <div class="color-info"><div class="color-swatch white"></div><div class="color-details"><h3>white box</h3><p style="color: var(--valentine-pink);">$10</p></div></div>
                        <div class="qty-controls"><button type="button" class="qty-btn" onclick="updateQty('white', -1)">−</button><span id="qty-white">0</span><button type="button" class="qty-btn" onclick="updateQty('white', 1)">+</button></div>
                    </div>
                    <div class="total-bar"><span>order total</span><span id="total-display">$0</span></div>
                </div>
                <div class="section">
                    <h2 class="section-title">your info</h2>
                    <div class="form-group"><label>name</label><input type="text" id="name" placeholder="Your name" required></div>
                    <div class="form-group">
                        <label>email</label>
                        <input type="email" id="email" placeholder="you@example.com" required 
                               pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" 
                               title="Please enter a valid email address (e.g., name@domain.com)">
                    </div>
                    <div class="form-group"><label>phone</label><input type="tel" id="phone" placeholder="(555) 123-4567" required></div>
                </div>
                <div class="section">
                    <h2 class="section-title">how to get it</h2>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="method" value="Pickup" required onclick="toggleMethod('pickup')" checked> <span>Pickup (Upper Market in San Francisco)</span></label>
                        <label class="radio-option" id="vDayDeliveryLabel" style="opacity: 0.4; cursor: not-allowed;"><input type="radio" name="method" id="vDayDeliveryRadio" value="Delivery" onclick="toggleMethod('delivery')" disabled> <span>Delivery (Free and available for orders $100+ in San Francisco)</span></label>
                    </div>
                    <div id="pickupDetails" class="method-details active">
                        <div class="info-box">
                            <p style="font-weight: 500; color: var(--valentine-pink);"><a href="https://maps.app.goo.gl/EZmuY7BPceEqVesBA" target="_blank" class="address-link">3639 Market Street, San Francisco, CA 94131</a></p>
                            <p style="font-style: italic; font-size: 0.85rem; color: var(--light-text);">Ring the first door bell when you get here!</p>
                        </div>
                        <label>pickup day</label>
                        <div class="radio-group">
                            <label class="radio-option"><input type="radio" name="day" value="Thursday, February 12" onclick="updateTimes(false)"> <span>Thursday, February 12</span></label>
                            <label class="radio-option"><input type="radio" name="day" value="Friday, February 13" onclick="updateTimes(false)"> <span>Friday, February 13</span></label>
                            <label class="radio-option"><input type="radio" name="day" value="Saturday, February 14" onclick="updateTimes(true)"> <span>Saturday, February 14 <span class="note-text">(morning only)</span></span></label>
                        </div>
                        <label style="margin-top: 1.5rem;">pickup time</label>
                        <div class="radio-group">
                            <label class="radio-option" id="morningSlot"><input type="radio" name="time" value="Morning (9AM - 11AM)"> <span>Morning (9AM - 11AM)</span></label>
                            <label class="radio-option" id="afternoonSlot"><input type="radio" name="time" value="Afternoon (12:30PM - 3PM)"> <span>Afternoon (12:30PM - 3PM)</span></label>
                            <label class="radio-option" id="eveningSlot"><input type="radio" name="time" value="Evening (6:30PM - 9PM)"> <span>Evening (6:30PM - 9PM)</span></label>
                        </div>
                    </div>
                    <div id="deliveryDetails" class="method-details">
                        <div class="form-group"><label>delivery address</label><p style="font-size: 0.85rem; color: var(--light-text); margin-bottom: 0.5rem;">Your order qualifies for free delivery in San Francisco!</p><textarea id="address" placeholder="Enter your San Francisco address"></textarea></div>
                    </div>
                </div>
                <div class="section">
                    <h2 class="section-title">payment</h2>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="pay" value="Venmo" required> <span>Venmo <span class="handle-detail">(@oats123)</span></span></label>
                        <label class="radio-option"><input type="radio" name="pay" value="Zelle"> <span>Zelle <span class="handle-detail">(avenajiajia@gmail.com)</span></span></label>
                        <label class="radio-option"><input type="radio" name="pay" value="Cash"> <span>Cash at pickup</span></label>
                    </div>
                </div>
                <button type="submit" class="btn-submit" id="submitBtn">submit pre-order</button>
            </form>
        </div>
        <div id="confirmation">
            <h1 class="page-title">order received!</h1>
            <p style="color: var(--light-text);">See you soon! Here is what I have:</p>
            <div class="info-box" style="margin-top: 2rem; border-left-color: var(--valentine-pink);">
                <h3 style="font-family: 'Libre Baskerville'; font-size: 1rem; margin-bottom: 0.5rem;">Order Summary</h3>
                <div id="summaryContent" class="summary-list"></div>
            </div>
            <div class="info-box" style="border-left-color: var(--valentine-pink-dark); background: #FFF9F8;">
                <p style="font-weight: 500; color: var(--valentine-pink);">Payment Reminder</p>
                <p style="font-size: 0.9rem;">Venmo: @oats123 (last 4 digits: 7476)</p>
                <p style="font-size: 0.9rem;">Zelle: avenajiajia@gmail.com</p>
            </div>
            <a href="index.html" style="display: block; text-align: center; margin-top: 2rem; color: var(--valentine-pink); text-decoration: none; font-weight: 500;">← back to home</a>
        </div>
    </div>
    <script>
        let quantities = { pink: 0, red: 0, white: 0 };
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwT-mQefx2FonndoDe81zB0WGZJAh3A-s0Cc3nX5e6hmg0BN9KnEIrc4nqjpoWLqkZBSg/exec';
        function updateQty(color, delta) {
            quantities[color] = Math.max(0, quantities[color] + delta);
            document.getElementById(`qty-${color}`).innerText = quantities[color];
            const total = (quantities.pink + quantities.red + quantities.white) * 10;
            document.getElementById('total-display').innerText = `$${total}`;
            const radio = document.getElementById('vDayDeliveryRadio'); const label = document.getElementById('vDayDeliveryLabel');
            if (total >= 100) { radio.disabled = false; label.style.opacity = "1"; label.style.cursor = "pointer";
            } else { if (radio.checked) { document.querySelector('input[value="Pickup"]').checked = true; toggleMethod('pickup'); } radio.disabled = true; label.style.opacity = "0.4"; label.style.cursor = "not-allowed"; }
        }
        function toggleMethod(m) {
            const pickupDetails = document.getElementById('pickupDetails'); const deliveryDetails = document.getElementById('deliveryDetails'); const addressField = document.getElementById('address');
            if (m === 'pickup') { pickupDetails.classList.add('active'); deliveryDetails.classList.remove('active'); addressField.required = false; addressField.value = ""; } else { pickupDetails.classList.remove('active'); deliveryDetails.classList.add('active'); addressField.required = true; document.querySelectorAll('input[name="day"], input[name="time"]').forEach(i => i.checked = false); }
        }
        function updateTimes(isSaturday) {
            const afternoon = document.getElementById('afternoonSlot'); const evening = document.getElementById('eveningSlot'); const morningInput = document.querySelector('#morningSlot input');
            if (isSaturday) { afternoon.classList.add('disabled'); evening.classList.add('disabled'); afternoon.querySelector('input').disabled = true; evening.querySelector('input').disabled = true; morningInput.checked = true; } else { afternoon.classList.remove('disabled'); evening.classList.remove('disabled'); afternoon.querySelector('input').disabled = false; evening.querySelector('input').disabled = false; }
        }
        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const total = (quantities.pink + quantities.red + quantities.white) * 10;
            if (total === 0) { alert('Select a box!'); return; }
            const method = document.querySelector('input[name="method"]:checked').value; const address = document.getElementById('address').value;
            if (method === 'Delivery' && (!address || address.trim() === "")) { alert('Please enter a delivery address.'); return; }
            const btn = document.getElementById('submitBtn'); btn.disabled = true; btn.textContent = 'submitting...';
            const name = document.getElementById('name').value; const day = document.querySelector('input[name="day"]:checked')?.value || 'N/A'; const time = document.querySelector('input[name="time"]:checked')?.value || 'N/A'; const pay = document.querySelector('input[name="pay"]:checked').value;
            document.getElementById('summaryContent').innerHTML = `<div class="summary-item"><span>Name:</span><span>${name}</span></div><div class="summary-item"><span>Pink Boxes:</span><span>${quantities.pink}</span></div><div class="summary-item"><span>Red Boxes:</span><span>${quantities.red}</span></div><div class="summary-item"><span>White Boxes:</span><span>${quantities.white}</span></div><div class="summary-item"><span>Total:</span><span>$${total}</span></div><div class="summary-item"><span>Method:</span><span>${method}</span></div>${method === 'Pickup' ? `<div class="summary-item"><span>Day:</span><span>${day}</span></div><div class="summary-item"><span>Time:</span><span>${time}</span></div>` : `<div class="summary-item"><span>Address:</span><span>${address}</span></div>`}<div class="summary-item"><span>Payment:</span><span>${pay}</span></div>`;
            try {
                await fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ name, email: document.getElementById('email').value, phone: document.getElementById('phone').value, pink_boxes: quantities.pink, red_boxes: quantities.red, white_boxes: quantities.white, method, day, time, address, payment: pay, total, timestamp: new Date().toISOString() }) });
                document.getElementById('formContainer').style.display = 'none'; document.getElementById('confirmation').classList.add('show');
            } catch (error) { alert('Error submitting. DM on IG!'); btn.disabled = false; }
        });
    </script>
</body>
</html>