<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order | Sunday Toffee</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary-brown: #786043;
            --primary-brown-dark: #5D4A33;
            --bg-cream: #F9F5EF;
            --dark-text: #393939;
            --light-text: #676767;
            --accent-tan: #F2E0C9;
        }
        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark-text);
            background-color: var(--bg-cream);
            line-height: 1.6;
            font-weight: 300;
        }
        nav { padding: 2rem 8%; display: flex; justify-content: space-between; align-items: center; max-width: 1100px; margin: 0 auto; }
        .logo { font-family: 'Libre Baskerville', serif; font-size: 1.3rem; color: var(--primary-brown); text-decoration: none; }
        .nav-links { display: flex; gap: 2rem; list-style: none; }
        .nav-links a { text-decoration: none; color: var(--light-text); font-size: 0.9rem; }
        .order-page { max-width: 550px; margin: 0 auto; padding: 2rem 1.5rem 5rem; }
        .page-header { text-align: center; margin-bottom: 2rem; }
        .page-title { font-family: 'Libre Baskerville', serif; font-size: 2.2rem; font-weight: 400; color: var(--primary-brown); margin-bottom: 1rem; }
        .notice { background: var(--accent-tan); padding: 0.75rem 1.25rem; border-radius: 6px; font-size: 0.85rem; color: var(--primary-brown); display: inline-block; }
        .section { margin-top: 2.5rem; }
        .section-title { font-family: 'Libre Baskerville', serif; font-size: 1.3rem; color: var(--primary-brown); border-bottom: 1px solid var(--accent-tan); padding-bottom: 0.75rem; margin-bottom: 1.25rem; }
        .product-card { background: white; border-radius: 8px; padding: 1.25rem; display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .qty-controls { display: flex; align-items: center; gap: 0.75rem; }
        .qty-btn { width: 36px; height: 36px; border: 1px solid var(--accent-tan); border-radius: 50%; background: white; color: var(--primary-brown); cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .qty-btn:hover { background: var(--accent-tan); }
        .total-bar { background: var(--accent-tan); border-radius: 8px; padding: 1rem 1.25rem; display: flex; justify-content: space-between; margin-top: 1rem; color: var(--primary-brown); font-weight: 500; }
        .info-box { background: white; border-left: 3px solid var(--primary-brown); padding: 1rem 1.25rem; border-radius: 0 6px 6px 0; margin-bottom: 1.5rem; }
        .form-group { margin-bottom: 1.25rem; }
        label { display: block; font-size: 0.85rem; margin-bottom: 0.5rem; color: var(--dark-text); }
        input, textarea { width: 100%; padding: 0.9rem 1rem; border: 1px solid var(--accent-tan); border-radius: 6px; font-family: 'Inter', sans-serif; font-size: 0.95rem; }
        .radio-group { display: flex; flex-direction: column; gap: 0.75rem; }
        .radio-option { display: flex; align-items: center; gap: 0.75rem; cursor: pointer; font-size: 0.95rem; }
        .btn-submit { width: 100%; padding: 1rem; background: var(--primary-brown); color: white; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; margin-top: 2rem; transition: background 0.2s; }
        .btn-submit:hover { background: var(--primary-brown-dark); }
        .btn-submit:disabled { opacity: 0.6; cursor: not-allowed; }
        footer { text-align: center; padding: 4rem 0; }
        #confirmation { display: none; text-align: center; padding: 3rem 0; }
        #confirmation.show { display: block; }
        .form-container.hide { display: none; }
    </style>
</head>
<body>
    <nav>
        <a href="index.html" class="logo">sunday toffee</a>
        <ul class="nav-links">
            <li><a href="index.html#products">what i make</a></li>
            <li><a href="index.html#about">about</a></li>
            <li><a href="order.html">order</a></li>
        </ul>
    </nav>

    <div class="order-page">
        <div id="formContainer" class="form-container">
            <div class="page-header">
                <h1 class="page-title">place your order</h1>
                <p style="color: var(--light-text); margin-bottom: 1.5rem;">Buttery, crunchy toffee filled with almonds, covered in rich chocolate, and topped with toasted nuts.</p>
                <span class="notice">Contains nuts and dairy. Made in a home kitchen.</span>
            </div>

            <form id="orderForm">
                <div class="section">
                    <h2 class="section-title">choose your toffee</h2>
                    <div class="product-card">
                        <div>
                            <h3 style="font-family: 'Libre Baskerville'; font-weight: 400;">8 oz box</h3>
                            <p style="color: var(--primary-brown);">$10</p>
                        </div>
                        <div class="qty-controls">
                            <button type="button" class="qty-btn" onclick="updateQty('eight', -1)">−</button>
                            <span id="qty-eight">0</span>
                            <button type="button" class="qty-btn" onclick="updateQty('eight', 1)">+</button>
                        </div>
                    </div>

                    <div class="product-card">
                        <div>
                            <h3 style="font-family: 'Libre Baskerville'; font-weight: 400;">4 oz box</h3>
                            <p style="color: var(--primary-brown);">$5</p>
                        </div>
                        <div class="qty-controls">
                            <button type="button" class="qty-btn" onclick="updateQty('four', -1)">−</button>
                            <span id="qty-four">0</span>
                            <button type="button" class="qty-btn" onclick="updateQty('four', 1)">+</button>
                        </div>
                    </div>

                    <div class="total-bar">
                        <span>order total</span>
                        <span id="total-display">$0</span>
                    </div>
                </div>

                <div class="section">
                    <h2 class="section-title">your info</h2>
                    <div class="form-group"><label>name</label><input type="text" id="name" required></div>
                    <div class="form-group"><label>email</label><input type="email" id="email" required></div>
                    <div class="form-group"><label>phone</label><input type="tel" id="phone" required></div>
                </div>

                <div class="section">
                    <h2 class="section-title">pickup details</h2>
                    <div class="info-box">
                        <p style="font-weight: 500; color: var(--primary-brown);">Order by Friday for Sunday pickup</p>
                        <p>3639 Market St, San Francisco, CA 94131</p>
                        <p style="font-style: italic; font-size: 0.85rem; color: var(--light-text);">Ring the first door bell when you get here!</p>
                    </div>
                    <div class="form-group">
                        <label>pickup window</label>
                        <div class="radio-group">
                            <label class="radio-option"><input type="radio" name="window" value="9AM - 12PM" required> <span>9AM - 12PM</span></label>
                            <label class="radio-option"><input type="radio" name="window" value="3PM - 6PM"> <span>3PM - 6PM</span></label>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2 class="section-title">payment</h2>
                    <div class="radio-group" style="margin-bottom: 1.5rem;">
                        <label class="radio-option"><input type="radio" name="pay" value="Venmo" required> <span>Venmo <span style="color: var(--light-text); font-size: 0.85rem;">(preferred)</span></span></label>
                        <label class="radio-option"><input type="radio" name="pay" value="Cash"> <span>Cash at pickup</span></label>
                        <label class="radio-option"><input type="radio" name="pay" value="Zelle"> <span>Zelle</span></label>
                    </div>
                    <div class="info-box" style="border-left-color: #A38C75; background: #faf8f5;">
                        <p style="font-weight: 500; color: var(--primary-brown); margin-bottom: 0.25rem;">Payment Handles</p>
                        <p style="font-size: 0.9rem;"><strong>Venmo:</strong> @oats123 (last 4 digits 7476)</p>
                        <p style="font-size: 0.9rem;"><strong>Zelle:</strong> avenajiajia@gmail.com</p>
                    </div>
                </div>

                <div class="section">
                    <h2 class="section-title">anything else?</h2>
                    <textarea id="notes" placeholder="Special requests, questions, etc. (optional)"></textarea>
                </div>

                <button type="submit" class="btn-submit" id="submitBtn">place order</button>
            </form>
        </div>

        <div id="confirmation">
            <h2 class="page-title" style="margin-top: 3rem;">order received!</h2>
            <p style="color: var(--light-text);">Thanks for your order! I'll text you to confirm pickup details.</p>
            <div class="info-box" style="margin-top: 2rem; text-align: left;">
                <p><strong>Total:</strong> $<span id="confirmTotal">0</span></p>
                <p><strong>Payment:</strong> Venmo @oats123 or Zelle avenajiajia@gmail.com</p>
            </div>
            <a href="index.html" style="display: inline-block; margin-top: 2rem; color: var(--primary-brown); text-decoration: none;">← back to home</a>
        </div>
    </div>

    <footer>
        <a href="index.html" class="logo">sunday toffee</a>
        <p style="color: var(--light-text); font-size: 0.85rem; margin-top: 0.5rem;">made with love, one batch at a time</p>
        <a href="https://instagram.com/sunday_toffee" target="_blank" style="color: var(--primary-brown); text-decoration: none; font-size: 0.9rem;">@sunday_toffee</a>
    </footer>

    <script>
        let quantities = { eight: 0, four: 0 };
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwT-mQefx2FonndoDe81zB0WGZJAh3A-s0Cc3nX5e6hmg0BN9KnEIrc4nqjpoWLqkZBSg/exec';

        function updateQty(type, change) {
            quantities[type] = Math.max(0, quantities[type] + change);
            document.getElementById(`qty-${type}`).innerText = quantities[type];
            let total = (quantities.eight * 10) + (quantities.four * 5);
            document.getElementById('total-display').innerText = `$${total}`;
        }

        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const total = (quantities.eight * 10) + (quantities.four * 5);
            if (total === 0) { alert('Please select at least one box'); return; }

            const btn = document.getElementById('submitBtn');
            btn.disabled = true; btn.textContent = 'submitting...';

            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                eight_oz: quantities.eight,
                four_oz: quantities.four,
                pickup_window: document.querySelector('input[name="window"]:checked').value,
                payment: document.querySelector('input[name="pay"]:checked').value,
                notes: document.getElementById('notes').value,
                total: total,
                timestamp: new Date().toISOString()
            };

            try {
                await fetch(GOOGLE_SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(formData) });
                document.getElementById('formContainer').classList.add('hide');
                document.getElementById('confirmation').classList.add('show');
                document.getElementById('confirmTotal').textContent = total;
            } catch (error) {
                alert('Error submitting order. Please try again or DM me on Instagram!');
                btn.disabled = false; btn.textContent = 'place order';
            }
        });
    </script>
</body>
</html>